#!/bin/bash

# We only want to run the script if the board has no analog stick capability
if knulli-board-capability "analogstick"; then
    exit 1
fi

DPAD_INPUT_TEMP_FOLDER="/tmp/trimui_inputd"
DPAD_DISABLED_FILE="/tmp/trimui_inputd/input_no_dpad"
DPAD_AS_ANALOG_FILE="/tmp/trimui_inputd/input_dpad_to_joystick"

if [[ ! -d dir ]]; then
    mkdir "$DPAD_INPUT_TEMP_FOLDER"
fi

if [ -f "$DPAD_AS_ANALOG_FILE" ]; then
    knulli-rgb-led-daemon animation achievement
    rm "$DPAD_DISABLED_FILE"
    rm "$DPAD_AS_ANALOG_FILE"
else
    knulli-rgb-led-daemon animation achievement
    touch "$DPAD_DISABLED_FILE"
    touch "$DPAD_AS_ANALOG_FILE"
fi

exit 0
